<!DOCTYPE html>
<!-- saved from url=(0037)https://www.crockford.com/graphs.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="author" content="Douglas Crockford">
<meta name="copyright" content="(C)2025 Douglas Crockford">
<meta name="date" content="2025">
<meta http-equiv="Expires" content="1968-12-09">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<link rel="stylesheet" href="./Trees and Graphs_files/crockford.css" type="text/css">
<link rel="icon" type="image/png" href="https://www.crockford.com/favicon.png">
<title>Trees and Graphs</title>
</head>
<body>
<div id="side">
    <div id="name"><a href="https://www.crockford.com/"><big>Douglas Crockford</big></a></div><br>
    <p><a href="https://www.crockford.com/blog.html">Blog</a></p>
    <p><a href="https://www.crockford.com/books.html">Books</a></p>
    <p><a href="https://www.crockford.com/videos.html">Videos</a></p>
    <p><a href="https://www.crockford.com/2025.html">2025 Appearances</a></p>
    <p><a href="https://www.crockford.com/slides.html">Slides</a></p>
    <p><a href="https://www.crockford.com/javascript/">JavaScript</a></p>
    <p><a href="https://mistysystem.com/">Misty</a></p>
    <p><a href="https://jslint.com/">JSLint</a></p>
    <p><a href="https://json.org/">JSON</a></p>
    <p><a href="https://github.com/douglascrockford">Github</a></p>
    <p><a href="https://www.crockford.com/ec.html">Electric Communities</a></p>
    <p><a href="https://www.flickr.com/photos/douglascrockford/albums/72157644699201976">Flickr Photo Album</a></p>
    <p><a href="https://www.linkedin.com/in/douglas-crockford-724600109/">LinkedIn</a></p>
    <p><a rel="me" href="https://layer8.space/@douglascrockford">Mastodon/Layer8</a></p>
    <p><a href="https://www.researchgate.net/profile/Douglas-Crockford">ResearchGate</a></p>
    <p><a href="https://www.crockford.com/pronouns.html">Pronouns: <dfn>pe/per</dfn></a></p>
    <p><a href="https://lz953.isrefer.com/go/preorder/B53xn5cY">Aptera</a></p>
    <p><a href="https://www.crockford.com/about.html">About</a></p>
</div>
<div id="blog">
<time>2023-05-23</time>
<h1>Trees and Graphs</h1>

<p>Computer programming benefits from the two fundamental data structures: records and arrays.</p>
<p><dfn>Records</dfn> are collections of key<code>:</code>value pairs. They go by many names, such as object, dictionary, struct, and hashtable. They can be static or dynamic. They can be classical or casual. The central idea is that a name is used to select a value. It is common to use <code>.</code><small>period</small> as the refinement operator that finds a field in a record.</p>
<p><dfn>Arrays</dfn> are linear collections of values that are paired with their ordinal, or position within the linear collection. They are sometimes called lists. They can have a fixed size or a variable size. The ordinals can start with <code>0</code> or <code>1</code> or sometimes another number. </p>
<p>More complex data structures can be obtained by allowing records and arrays to nest. In these structures, each record or array that contains (or points to) another record or array is called a <dfn>node</dfn>. A record or array that does not contain (or point to) another record or array is called a <dfn>leaf</dfn>. Perhaps the most popular class of complex data structures is called <dfn>trees</dfn>. Trees are excellent at representing hierarchical data.
Trees must abide by these rules: </p>
<ul>
    <li>The outermost node is called the <dfn>root</dfn>. No node in the tree may point to the root.</li>
    <li>Every other  record or array in the tree must be pointed to by  exactly one node.</li>
</ul>
<p>The other class of complex data structures is called <dfn>graphs</dfn>. A graph is like a tree except that there are no rules. This allows for loops, recurrences, and continuations. Graphs can get very complex.</p>
<p>The JSON data interchange format is very good at representing trees. Whilst I was designing it, I considered adding graphs. The way it would work was that you assign a number, starting with <code>0</code>, to each <code>{</code><small>left brace</small> and <code>[</code><small>left bracket</small> in the JSON text. A graph value is represented by <code>^</code><small>circumflex</small> followed by the the number of a substructure that had been encountered earlier. I decided to reject this feature because it violated the JSON design rules:</p>
<ul>
    <li>Minimal</li>
    <li>Textual</li>
    <li>A subset of JavaScript</li>
</ul>
<p>Later, I wrote a pair of functions [<a href="https://github.com/douglascrockford/JSON-js/blob/master/cycle.js">cycle.js</a>] that could convert graphs into trees and back again. To illustrate, this is how to make the simplest graph:</p>
<pre>const a = [];    // make an array
a[0] = a;        // the first element of the array is the array</pre>
<p>Ordinarily, JSON can not represent this graph. However, my rejected design could have:</p>
<pre>[^0]</pre>
<p>[<a href="https://github.com/douglascrockford/JSON-js/blob/master/cycle.js">cycle.js</a>] can represent it like this:</p>
<pre>[{$ref: "$"}]</pre>
<p>The array contains an object containing a <code>$ref</code> field. The <code>$ref</code> indicates that this object represents a graph pointer. The value of the <code>$ref</code> field is a string containing the path of an object or array in the graph using a subset of <a href="https://goessner.net/articles/JsonPath/">JSONPath</a>. <code>$</code><small>dollar sign</small> represents the root.
</p>
<p>I used to think about making a new format for graphs, supporting trees as a subset. I now think that would be a bad idea.
Trees are easy to traverse.
Graphs can be much harder to traverse if you do not already understand the specific structure because you can easily get caught in a loop.
Without that prior knowledge, graphs can be confusing, and confusion can lead to bugs and security exploits.
Ultimately, every graph can easily be transformed into a tree and back again.
Making that encoding step explicit is better than the risk of feeding graphs to programs expecting trees.
</p>
  <h5><a href="https://www.crockford.com/queue.html">The Queue Metaphor: List or Beast?</a></h5>

</div>



</body></html>