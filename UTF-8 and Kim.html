<!DOCTYPE html>
<!-- saved from url=(0034)https://www.crockford.com/kim.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="author" content="Douglas Crockford">
<meta name="copyright" content="(C)2025 Douglas Crockford">
<meta name="date" content="2025">
<meta http-equiv="Expires" content="1968-12-09">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<link rel="stylesheet" href="./UTF-8 and Kim_files/crockford.css" type="text/css">
<link rel="icon" type="image/png" href="https://www.crockford.com/favicon.png">
<title>UTF-8 and Kim</title>
</head>
<body>
<div id="side">
    <div id="name"><a href="https://www.crockford.com/"><big>Douglas Crockford</big></a></div><br>
    <p><a href="https://www.crockford.com/blog.html">Blog</a></p>
    <p><a href="https://www.crockford.com/books.html">Books</a></p>
    <p><a href="https://www.crockford.com/videos.html">Videos</a></p>
    <p><a href="https://www.crockford.com/2025.html">2025 Appearances</a></p>
    <p><a href="https://www.crockford.com/slides.html">Slides</a></p>
    <p><a href="https://www.crockford.com/javascript/">JavaScript</a></p>
    <p><a href="https://mistysystem.com/">Misty</a></p>
    <p><a href="https://jslint.com/">JSLint</a></p>
    <p><a href="https://json.org/">JSON</a></p>
    <p><a href="https://github.com/douglascrockford">Github</a></p>
    <p><a href="https://www.crockford.com/ec.html">Electric Communities</a></p>
    <p><a href="https://www.flickr.com/photos/douglascrockford/albums/72157644699201976">Flickr Photo Album</a></p>
    <p><a href="https://www.linkedin.com/in/douglas-crockford-724600109/">LinkedIn</a></p>
    <p><a rel="me" href="https://layer8.space/@douglascrockford">Mastodon/Layer8</a></p>
    <p><a href="https://www.researchgate.net/profile/Douglas-Crockford">ResearchGate</a></p>
    <p><a href="https://www.crockford.com/pronouns.html">Pronouns: <dfn>pe/per</dfn></a></p>
    <p><a href="https://lz953.isrefer.com/go/preorder/B53xn5cY">Aptera</a></p>
    <p><a href="https://www.crockford.com/about.html">About</a></p>
</div>
<div id="blog">
<time>2019-11-20</time>
<h1>UTF-8 and Kim</h1>

<p>
 Unicode is a 21 bit character set. Its 21-ness seems like an odd choice,
 resulting from a long series of unintended consequences stretching back to
 the design of <a href="https://www.crockford.com/ascii.html">ASCII</a>. There are three popular conventions for how to represent Unicode:</p>
<ul>
 <li>UTF-32, where each complete codepoint is placed in its own 32 bit word. This is the best representation from the perspective of programs that correctly manipulate texts, but it is unpopular because it seems wasteful.</li>
 <li>UTF-16, where each codepoint is split into one or two codeunits. Each codeunit is placed in a 16 bit word. This is more memory efficient if most characters are situated in the Basic Multilingual Plane, but it is more error prone.</li>
 <li>UTF-8, where each code point is split into a variable number of bytes. This is the preferred form to put on the wire, even though it makes CJK characters 50% bigger.</li>
</ul>
<p>UTF-8 was designed by Ken Thompson. It has some very nice properties:</p>
<ul>
 <li>ASCII characters are unchanged. This is much liked by American programmers because it makes it easier to ignore the rest of the world.</li>
 <li>Given a point in the middle of a text, it is possible to find the beginning of a multibyte character.</li>
 <li>It sorts, preserving the Unicode sequence. The Unicode collating sequence is far from ideal, so this is perhaps not important.</li>
</ul>
<p>UTF-8 has some disadvantages. It is a little complicated in encoding and decoding. It represents ASCII very efficiently, but for all of the other characters, it only delivers about 5 bits per byte. UTF-8 can have aliases where a character can be encoded multiple ways, requiring additional rules and policies. This is an attractive nuisance; some systems intentionally violate the rules.</p>
<img src="./UTF-8 and Kim_files/kim.png" style="float: right;">
<p id="kim">I propose another representation for the wire called Kim. Kim is a very simple encoding that delivers 7 bits per byte. The bottom 7 bits of each byte contain data, which can be accumulated to produce 21 bit characters. The top bit of each byte is 1 if the byte is not the last byte of a character. The top bit of each byte is 0 if the byte is the last byte of a character, contributing the least significant 7 bits. This gives up the sorting property of UTF-8 in exchange for greater simplicity and performance.<a id="ref0" href="https://www.crockford.com/kim.html#0"><sup>0</sup></a></p>
<table>
 <tbody><tr>
     <th rowspan="2">Number<br>
of bytes</th>
     <th colspan="2">Codepoint range</th>
    </tr>
 <tr>
 <th>Kim</th><th>UTF-8</th></tr>
 <tr>
 <td>1</td><td><code>U+007F</code></td><td><code>U+007F</code></td></tr>
 <tr>
 <td>2</td><td><code>U+3FFF</code></td><td><code>U+07FF</code></td></tr>
 <tr>
 <td>3</td><td><code>U+10FFFF</code></td>
 <td><code>U+FFFF</code></td></tr>
 <tr>
 <td>4</td><td>&nbsp;</td><td><code>U+10FFFF</code></td></tr>
</tbody></table>
<p>
 Characters in the ranges <code>U+0800</code> thru <code>U+3FFF</code> and <code>U+10000</code> thru <code>U+10FFFF</code> will be one
 byte smaller when encoded in Kim compared to UTF-8. </p>
 <p>
 Kim is beneficial when using scripts such as Aramaic,
 Avestan, Balinese, Batak, Bopomofo, Buginese, Buhid, Carian, Cherokee,
 Coptic, Cyrillic, Deseret, Egyptian Hieroglyphs, Ethiopic, Georgian,
 Glagolitic, Gothic, Hangul Jamo, Hanunoo, Hiragana, Kanbun, Kaithi,
 Kannada, Katakana, Kharoshthi, Khmer, Lao, Lepcha, Limbu, Lycian, Lydian,
 Malayalam, Mandaic, Meroitic, Miao, Mongolian, Myanmar, New Tai Lue,
 Ol Chiki, Old South Arabian, Old Turkic, Oriya, Osmanya, Pahlavi, Parthian, Phags-Pa,
 Phoenician, Samaritan, Sharada, Sinhala, Sora Sompeng, Tagalog, Tagbanwa,
 Takri, Tai Le, Tai Tham, Tamil, Telugu, Thai, Tibetan, Tifinagh,
 and Unified Canadian Aboriginal Syllabics.
 </p><p>
 As with UTF-8, it is possible to detect character boundaries within a byte
 sequence. A byte is a first byte if the preceding byte has a top bit of zero.
</p><p>Kim can also be used to represent block lengths, large integers, and other transmission values.
Applications that require negative numbers may use a leading <code>0x80</code> to represent the minus sign.
A leading <code>0x80</code> must not be immediately followed by another <code>0x80</code> or by <code>0x00</code>.</p>
<p>
UTF-8 is one of the world's great inventions. While Kim is simpler and more
 efficient, it is not clear that it is worth the expense of transition.
But it is ideal in new applications.
</p>
<hr>
<p><a id="0" href="https://www.crockford.com/kim.html#ref0"><sup>0</sup></a> UTF-16 also does not sort properly for the Unicode collating sequence, but UTF-8 and UTF-32 do sort properly.</p>
<h5><a href="https://www.crockford.com/ascii.html">ASCII.</a></h5>
<h5><a href="https://www.crockford.com/utf8.html">UTF-8.</a></h5>
<h5><a href="https://www.crockford.com/nota.html">Nota Message Format</a>

</h5></div>



</body></html>