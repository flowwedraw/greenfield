<!DOCTYPE html>
<!-- saved from url=(0042)https://www.crockford.com/securecolor.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="author" content="Douglas Crockford">
<meta name="copyright" content="(C)2025 Douglas Crockford">
<meta name="date" content="2025">
<meta http-equiv="Expires" content="1968-12-09">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<link rel="stylesheet" href="./Secure Colors_files/crockford.css" type="text/css">
<link rel="icon" type="image/png" href="https://www.crockford.com/favicon.png">
<title>Secure Colors</title>
<style>
div#demo {
    background-color: ghostwhite;
    border: 1pt solid black;
    font-family: Programma, mono;
    font-size: 100%;
    font-style: normal;
    font-weight: bold;
    padding: 0.25em;
}
div#pass {
    background-color: white;
    border: 1pt solid black;
    margin: 2em;
    padding: 0.5em;
    text-align: center;
}
span.cycle, span.anticycle {
    border: 1pt solid black;
    display: inline-block;
    height: 0.7em;
    width: 1.25em;
}
</style>
</head>
<body>
<div id="side">
    <div id="name"><a href="https://www.crockford.com/"><big>Douglas Crockford</big></a></div><br>
    <p><a href="https://www.crockford.com/blog.html">Blog</a></p>
    <p><a href="https://www.crockford.com/books.html">Books</a></p>
    <p><a href="https://www.crockford.com/videos.html">Videos</a></p>
    <p><a href="https://www.crockford.com/2025.html">2025 Appearances</a></p>
    <p><a href="https://www.crockford.com/slides.html">Slides</a></p>
    <p><a href="https://www.crockford.com/javascript/">JavaScript</a></p>
    <p><a href="https://mistysystem.com/">Misty</a></p>
    <p><a href="https://jslint.com/">JSLint</a></p>
    <p><a href="https://json.org/">JSON</a></p>
    <p><a href="https://github.com/douglascrockford">Github</a></p>
    <p><a href="https://www.crockford.com/ec.html">Electric Communities</a></p>
    <p><a href="https://www.flickr.com/photos/douglascrockford/albums/72157644699201976">Flickr Photo Album</a></p>
    <p><a href="https://www.linkedin.com/in/douglas-crockford-724600109/">LinkedIn</a></p>
    <p><a rel="me" href="https://layer8.space/@douglascrockford">Mastodon/Layer8</a></p>
    <p><a href="https://www.researchgate.net/profile/Douglas-Crockford">ResearchGate</a></p>
    <p><a href="https://www.crockford.com/pronouns.html">Pronouns: <dfn>pe/per</dfn></a></p>
    <p><a href="https://lz953.isrefer.com/go/preorder/B53xn5cY">Aptera</a></p>
    <p><a href="https://www.crockford.com/about.html">About</a></p>
</div>
<div id="blog">
<time>2023-06-04</time>
<h1>Secure Colors</h1>

<noscript>Nothing good happens without JavaScript.</noscript>
<p>
The web accidentally introduced the idea of a distributed program that represented the interests of multiple parties
cooperatively serving a human. The obvious security problem is that those parties should not fully trust each other,
and the human should not fully trust them either. All should be suspicious of each other, protecting their own interests.
To do this successfully, we rely on containment, isolation, and strong interfaces.
</p><p>
    As we transition to actor systems, the benefits of cooperation under mutual suspicion will increase, and it remains
important to protect the human. One of the most menacing attacks is for a party to visually impersonate the browser
or the operating system in order to trick the human into giving up critical information. The attacker will try very hard
to spoof. We want to help the human recognize the spoof.
</p><p>
The operating system should, in some conspicuous corner, display a color cycling region: <span class="cycle" style="background-color: rgb(161, 198, 229);"></span>.
By convention, any dialog representing the operating system will display the same color cycle in synchronization. There
will be rules that prohibit guest code from sampling pixels outside of its assigned region. The color cycling is driven by a random number generator. The spoofer
can know the algorithm, but can not know what the random colors are.
</p><p>
In this demonstration there are two dialogs requesting the human's super password. Only one is legit.
</p>
<div id="demo">
<div><span class="cycle" style="background-color: rgb(161, 198, 229);"></span> File  Edit  Doom  Despair  Agony </div>
<div id="pass">
    <span class="cycle" style="background-color: rgb(161, 198, 229);"></span> Please enter your super password:
    <input type="text" placeholder="super password" size="16">
</div>
<div id="pass">
    <span class="anticycle" style="background-color: rgb(34, 149, 200);"></span> Please enter your super password:
    <input type="text" placeholder="super password" size="16">
</div>
</div>
<p>
The idea is that the system can present some information that allows the user
to easily determine if a widget is real or if it is a spoof.
This is done with a pattern of changing colors. The theory is that a human
can quickly distinguish between <span class="cycle" style="background-color: rgb(161, 198, 229);"></span> and <span class="anticycle" style="background-color: rgb(34, 149, 200);"></span>.
With experience, humans will grow to always look for the colors.
</p><p>
    A nagging problem is full screen mode. In full screen mode, a bad actor can easily impersonate anything that can
    be displayed. Current systems try to mitigate this by warning the human that the display is going into full screen mode.
    A more effective mitigation is to sharply reduce the capability to receive input events. In full screen mode,
    guest actors can receive <span class="key">play</span>, <span class="key">pause</span>, and so forth. Most other events
    will be suppressed. Some events, such as <span class="key">select</span> and
    <span class="key">enter</span>, will kick the actor out of full screen mode.
</p><p>
Tangential aside: The browser's
interests are not necessarily the same as yours, nor are the operating system's. The operating system used to
be concerned with the reliable execution of programs. Over the years, it has taken on other missions, such as
monetizing your activities.</p>
<ul>
<li><a href="https://www.crockford.com/colors.html">CSS Colors</a></li><a href="https://www.crockford.com/colors.html">
</a></ul><a href="https://www.crockford.com/colors.html">
<script>
/*jslint browser: true */
(function () {
    "use strict";

    let system = [200, 200, 200];
    let newcolor = [200, 200, 200];
    let othercolor = [200, 200, 200];
    let other = [200, 200, 200];
    let goods = Array.from(document.getElementsByClassName("cycle"));
    let bads = Array.from(document.getElementsByClassName("anticycle"));


    function pick() {
        return Math.floor(Math.random() * 256);
    }

    function hashcolor(color) {
        return '#' + color.map(function (value) {
            return ('0' + value.toString(16)).slice(-2);
        }).join('');
    }

    function fade(current,  target) {
        let big_delta = -1;
        let big_i = -1;
        let big_sign;
        let delta;
        let i;
        let same = 0;
        let sign;
        for (i = 0; i < 3; i += 1) {
            delta =  current[i] -  target[i];
            if (delta === 0) {
                same += 1;
            } else {
                sign = Math.sign(delta);
                delta = Math.abs(delta);
                if (delta > big_delta) {
                    big_i = i;
                    big_delta = delta;
                    big_sign = sign;
                    break;
                }
            }
        }
        if (same >= 3) {
            target[0] = pick();
            target[1] = pick();
            target[2] = pick();
        } else {
            current[big_i] -= big_sign;
        }
        return  current;
    }

    setTimeout(
        function tick() {
            let color = hashcolor(fade(system, newcolor));
            goods.forEach(function (element) {
                element.style.backgroundColor = color;
            });
            color = hashcolor(fade(other, othercolor));
            bads.forEach(function (element) {
                element.style.backgroundColor = color;
            });
            return setTimeout(tick, 10);
        },
        0
    );
}());
</script>

</a></div><a href="https://www.crockford.com/colors.html">



</a></body></html>