<!DOCTYPE html>
<!-- saved from url=(0037)https://www.crockford.com/scaled.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="author" content="Douglas Crockford">
<meta name="copyright" content="(C)2025 Douglas Crockford">
<meta name="date" content="2025">
<meta http-equiv="Expires" content="1968-12-09">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<link rel="stylesheet" href="./Scaled Numbers_files/crockford.css" type="text/css">
<link rel="icon" type="image/png" href="https://www.crockford.com/favicon.png">
<title>Scaled Numbers</title>
<style>
.repeating {
	text-decoration-line: overline;
}
</style>
</head>
<body>
<div id="side">
    <div id="name"><a href="https://www.crockford.com/"><big>Douglas Crockford</big></a></div><br>
    <p><a href="https://www.crockford.com/blog.html">Blog</a></p>
    <p><a href="https://www.crockford.com/books.html">Books</a></p>
    <p><a href="https://www.crockford.com/videos.html">Videos</a></p>
    <p><a href="https://www.crockford.com/2025.html">2025 Appearances</a></p>
    <p><a href="https://www.crockford.com/slides.html">Slides</a></p>
    <p><a href="https://www.crockford.com/javascript/">JavaScript</a></p>
    <p><a href="https://mistysystem.com/">Misty</a></p>
    <p><a href="https://jslint.com/">JSLint</a></p>
    <p><a href="https://json.org/">JSON</a></p>
    <p><a href="https://github.com/douglascrockford">Github</a></p>
    <p><a href="https://www.crockford.com/ec.html">Electric Communities</a></p>
    <p><a href="https://www.flickr.com/photos/douglascrockford/albums/72157644699201976">Flickr Photo Album</a></p>
    <p><a href="https://www.linkedin.com/in/douglas-crockford-724600109/">LinkedIn</a></p>
    <p><a rel="me" href="https://layer8.space/@douglascrockford">Mastodon/Layer8</a></p>
    <p><a href="https://www.researchgate.net/profile/Douglas-Crockford">ResearchGate</a></p>
    <p><a href="https://www.crockford.com/pronouns.html">Pronouns: <dfn>pe/per</dfn></a></p>
    <p><a href="https://lz953.isrefer.com/go/preorder/B53xn5cY">Aptera</a></p>
    <p><a href="https://www.crockford.com/about.html">About</a></p>
</div>
<div id="blog">
<time>2023-02-07</time>
<h1>Scaled Numbers</h1>

<p>In <em><a href="https://www.amazon.com/dp/1949815005/wrrrldwideweb/">How JavaScript Works</a></em>, I demonstrated two ways to approximate real numbers using integers: Floating Point and Rationals. There is also a third way: scaled numbers. This was the very first way used on the first generation of computers. The technique is still effective today, especially on the cheapest microprocessors. </p>
<p>It is really simple.</p>
<pre>scaled_number = int * scale_factor
int = scaled_number / scale_factor</pre>
<p>In a scaled number, the range is traded off for a fractional piece, essentially</p>
<pre>small_int + numerator / scale_factor</pre>
<p>I first worked with these in 1983, writing a graphics library in which the pixel coordinates were real numbers.
For example, the <code>rect</code> function took a scaled x, a scaled y, a scaled width, and a scaled height.
That kind of stuff is pretty common now, but it was bleeding edge forty years ago.</p>
<p>Addition and subtraction of scaled numbers is really easy. If two numbers have the same scale factor, you can add and subtract them as if they are integers. Multiplication and division are a little bit hard. The result of the multiply instruction must be divided by the scale factor. This is because</p>
<pre>(int * scale_factor) * (another_int * scale_factor)
    =
(int * another_int) * (scale_factor * scale_factor)</pre>
<p>Similarly, when dividing, the dividend must first be multiplied by the scale factor. On the cheapest processors, make the scale factor a power of two, because shifting bits is a lot easier than multiplying and dividing. In an expression that both multiples and divides, the scaling operations can cancel out.</p>
<h2 id="num9e6">Num9e6</h2>
<p>My favorite scale factor is nine million. In a 64 bit system, this gives numbers as huge as </p>
<pre>1024819115206 775807/9000000</pre>
<pre>1024819115206.086200<span class="repeating">7</span></pre>
<p>and as tiny as </p>
<pre>1/9000000</pre>
<pre>0.000000<span class="repeating">1</span></pre>
<p>The overline above the seventh decimal place indicates that the digit is repeating.</p>
<pre>0.000000111111111111111111111111111111111111111111111111111111111111111...</pre>
<p>An upper bound of a trillion is too small for some scientific applications, but is adequate for most business needs. That comes with six exact decimal places, which is something that IEEE 754 binary floating point can not do, and there is a repeating seventh digit. That makes it possible to exactly represent all of these fractions:</p>
<blockquote><code>1/2, 1/3, 1/4, 1/5, 1/6, 1/8, 1/9, 1/10, 1/12, 1/15, 1/16, 1/18, 1/20, 1/24, 1/25, 1/30, 1/32, 1/36, 1/40, 1/45, 1/48, 1/50, 1/60, 1/72, 1/75, 1/80, 1/90, 1/96, 1/100, 1/120, 1/125, 1/144, 1/150, 1/160, 1/180, 1/200, 1/225, 1/240, 1/250, 1/288, 1/300, 1/360, 1/375, 1/400, 1/450, 1/480, 1/500, 1/600, 1/625, 1/720, 1/750, 1/800, 1/900, 1/1000, 1/1125, 1/1200, 1/1250, 1/1440, 1/1500, 1/1800, 1/1875, 1/2000, 1/2250, 1/2400, 1/2500, 1/3000, 1/3125, 1/3600, 1/3750, 1/4000, 1/4500, 1/5000, 1/5625, 1/6000, 1/6250, 1/7200, 1/7500, 1/9000, 1/9375, 1/10000, 1/11250, 1/12000, 1/12500, 1/15000, 1/18000, 1/18750, 1/20000, 1/22500, 1/25000, 1/28125, 1/30000, 1/36000, 1/37500, 1/45000, 1/50000, 1/56250, 1/60000, 1/75000, 1/90000, 1/100000, 1/112500, 1/150000, 1/180000, 1/225000, 1/300000, 1/450000, 1/900000</code></blockquote>
<p>I call this system <b>Num9e6</b>. It is much better suited to more computing tasks than the IEEE format we are currently
stuck with, which offers these fractions:</p>
<blockquote><code>1/2, 1/4, 1/8, 1/16, 1/32, 1/64, 1/126, 1/256, 1/512, 1/1024, 1/2048, 1/4096, 1/8192, 1/16384, 1/32768, 1/65536, 1/131072, 1/262144, 1/524288, 1/1048576, 1/2097152, 1/4194304, 1/8388608, 1/16777216, ...</code></blockquote>
<p>Which set of fractions looks to be more useful in your applications?</p>
    <h5><em><a href="https://www.amazon.com/dp/1949815005/wrrrldwideweb/">How JavaScript Works</a></em></h5>
    <h5><a href="https://www.crockford.com/scaling.html">Scaling Operator</a></h5>
    <h5><a href="https://www.crockford.com/dec64.html">DEC64</a></h5>

</div>



</body></html>